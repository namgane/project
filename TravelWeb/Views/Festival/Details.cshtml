@model TravelWeb.Models.Festival
@{
    ViewData["Title"] = Model.Name;
}

<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Index","Festival")">Lễ hội</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Model.Name</li>
        </ol>
    </nav>

    <div class="row g-4 align-items-start">
        <div class="col-md-6">
            @if (Model.ImageUrls != null && Model.ImageUrls.Count > 0)
            {
                <div class="image-gallery">
                    @foreach (var imageUrl in Model.ImageUrls)
                    {
                        <div class="gallery-item" onclick="openImageModal('@imageUrl', '@Model.Name')">
                            <img src="@imageUrl" alt="@Model.Name" class="img-fluid rounded shadow">
                        </div>
                    }
                </div>
            }
            else
            {
                <img src="@Model.ImageUrl" alt="@Model.Name" class="img-fluid rounded shadow">
            }
        </div>
        <div class="col-md-6">
            <h2 class="text-primary mb-2">@Model.Name</h2>
            <div class="mb-3 d-flex gap-2">
                <span class="badge bg-light text-dark badge-soft">@Model.Region</span>
                <span class="badge bg-primary">@Model.StartDate.ToString("dd/MM") - @Model.EndDate.ToString("dd/MM/yyyy")</span>
            </div>
            <p class="mb-1"><strong>Địa điểm:</strong> @Model.Province</p>
            <p class="mb-3"><strong>Giới thiệu:</strong> @Model.Description</p>
            <div class="mb-3">
                <strong>Điểm nổi bật:</strong>
                <div>@Model.Highlight</div>
            </div>
            <div class="d-flex flex-wrap gap-2">
                <a href="@Url.Action("Suggest", "Transport", new { from = "TP.HCM", to = @Model.Province })" class="btn btn-success">
                    🚗 Gợi ý cách di chuyển
                </a>
                <a href="@Url.Action("Suggestions", "Trip")" class="btn btn-outline-success">
                    🚍 Gợi ý chuyến đi đến các lễ hội sắp tới
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">@Model.Name</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img id="modalImage" src="" alt="" class="img-fluid rounded">
            </div>
        </div>
    </div>
</div>

@section Scripts{
<script>
    function openImageModal(imageUrl, title) {
        document.getElementById('modalImage').src = imageUrl;
        document.getElementById('modalImage').alt = title;
        document.getElementById('imageModalLabel').textContent = title;
        
        var modal = new bootstrap.Modal(document.getElementById('imageModal'));
        modal.show();
    }
</script>
}
